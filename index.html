<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Multi-View</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #0f0f0f;
            color: #ffffff;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            border-radius: 12px;
            background: #272727;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .grid-dynamic {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        }
        @media (max-width: 640px) {
            .grid-dynamic {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">

    <!-- Header & Controls -->
    <header class="max-w-6xl mx-auto mb-10">
        <h1 class="text-3xl font-bold mb-6 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#FF0000" viewBox="0 0 256 256"><path d="M234.33,69.52a24,24,0,0,0-14.49-16.4C193.08,41,128,41,128,41s-65.08,0-91.84,12.12a24,24,0,0,0-14.49,16.4C18.39,84.09,16,128,16,128s2.39,43.91,5.67,58.48a24,24,0,0,0,14.49,16.41C62.92,215,128,215,128,215s65.08,0,91.84-12.12a24,24,0,0,0,14.49-16.41C237.61,171.91,240,128,240,128S237.61,84.09,234.33,69.52ZM160,128,104,160V96Z"></path></svg>
            YouTube 複窓プレイヤー
        </h1>
        
        <div class="bg-[#1e1e1e] p-6 rounded-2xl shadow-xl border border-white/10">
            <div class="flex flex-col md:flex-row gap-4">
                <input 
                    type="text" 
                    id="videoUrl" 
                    placeholder="YouTubeのURLを入力 (例: https://www.youtube.com/watch?v=...)" 
                    class="flex-1 bg-[#121212] border border-white/20 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-red-600 transition-all text-white"
                >
                <button 
                    onclick="addVideo()" 
                    class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg transition-colors flex items-center justify-center gap-2"
                >
                    <span>動画を追加</span>
                </button>
            </div>
            <p id="errorMessage" class="text-red-400 text-sm mt-3 hidden">有効なYouTubeのURLを入力してください。</p>
        </div>
    </header>

    <!-- Video Grid -->
    <main id="videoGrid" class="grid-dynamic max-w-[1600px] mx-auto">
        <!-- Initial helper message if empty -->
        <div id="emptyState" class="col-span-full py-20 text-center text-gray-500">
            <p class="text-xl">URLを入力して動画を追加してください</p>
            <p class="text-sm mt-2">複数の動画を同時に視聴・管理できます</p>
        </div>
    </main>

    <script>
        const videoGrid = document.getElementById('videoGrid');
        const videoUrlInput = document.getElementById('videoUrl');
        const errorMessage = document.getElementById('errorMessage');
        const emptyState = document.getElementById('emptyState');

        // Extract Video ID from various YouTube URL formats
        function extractVideoId(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length == 11) ? match[7] : false;
        }

        function addVideo() {
            const url = videoUrlInput.value.trim();
            const videoId = extractVideoId(url);

            if (videoId) {
                errorMessage.classList.add('hidden');
                emptyState.classList.add('hidden');
                
                const videoCard = document.createElement('div');
                videoCard.className = 'group relative bg-[#1e1e1e] rounded-2xl overflow-hidden border border-white/10 hover:border-white/30 transition-all shadow-lg animate-in fade-in zoom-in duration-300';
                
                videoCard.innerHTML = `
                    <div class="video-container">
                        <iframe 
                            src="https://www.youtube.com/embed/${videoId}?autoplay=0" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="p-3 flex justify-between items-center">
                        <span class="text-xs text-gray-400 font-mono">ID: ${videoId}</span>
                        <button 
                            onclick="removeVideo(this)" 
                            class="text-gray-400 hover:text-red-500 transition-colors p-1"
                            title="削除"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm112,168a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V64H208Z"></path></svg>
                        </button>
                    </div>
                `;

                videoGrid.appendChild(videoCard);
                videoUrlInput.value = '';
                videoUrlInput.focus();
            } else {
                errorMessage.classList.remove('hidden');
            }
        }

        function removeVideo(button) {
            const card = button.closest('.group');
            card.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                card.remove();
                if (videoGrid.querySelectorAll('.group').length === 0) {
                    emptyState.classList.remove('hidden');
                }
            }, 200);
        }

        // Allow 'Enter' key to add video
        videoUrlInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                addVideo();
            }
        });
    </script>
</body>
</html>
